{% extends "layout.html" %}
{% block content %}
<h3>当天记录</h3>

<form method="post" class="row g-3">
  <div class="col-md-3">
    <label class="form-label">日期</label>
    <input class="form-control" type="date" name="date" value="{{ record.date }}">
  </div>
  <div class="col-md-3">
    <label class="form-label">刷卡金额（Credit Card）</label>
    <input class="form-control" type="number" step="0.01" name="card_amount" value="{{ record.card_amount }}">
  </div>
  <div class="col-md-3">
    <label class="form-label">现金金额（Cash）</label>
    <input class="form-control" type="number" step="0.01" name="cash_amount" value="{{ record.cash_amount }}">
  </div>
  <div class="col-md-3">
    <label class="form-label">客人数（Number of Customers）</label>
    <input class="form-control" type="number" min="0" name="customer_count" value="{{ record.customer_count }}">
  </div>

  <div class="col-12">
    <label class="form-label">备注</label>
    <input class="form-control" type="text" name="note" value="{{ record.note }}">
  </div>

  <div class="col-12">
    <button type="submit" class="btn btn-primary">保存今天记录</button>
    <button type="reset" class="btn btn-secondary">清空输入</button>
    <a class="btn btn-outline-secondary" href="{{ url_for('history') }}">查看历史记录</a>
  </div>
</form>

<hr>

<div class="mt-3">
  <h5>当前记录</h5>
  <table class="table table-sm">
    <thead>
      <tr>
        <th>日期</th>
        <th>刷卡金额</th>
        <th>现金金额</th>
        <th>总金额</th>
        <th>客人数</th>
        <th>平均客单价</th>
        <th>备注</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>{{ record.date }}</td>
        <td>${{ "%.2f"|format(record.card_amount) }}</td>
        <td>${{ "%.2f"|format(record.cash_amount) }}</td>
        <td>${{ "%.2f"|format(record.total_amount) }}</td>
        <td>{{ record.customer_count }}</td>
        <td>
          {% if record.customer_count and record.customer_count > 0 %}
            ${{ "%.2f"|format(record.total_amount / record.customer_count) }}
          {% else %}
            N/A
          {% endif %}
        </td>
        <td>{{ record.note }}</td>
      </tr>
    </tbody>
  </table>
</div>
{% endblock %}
